<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <script type="text/javascript"  src="../static/js/scripts.js"></script>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="src/logo.svg" type="image/gif" sizes="16x16">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <noscript>Kapcsold be JavaScriptet a böngészőben az adagok hozzáadásához!</noscript>
    <title>Karakter létrehozása</title>
</head>
<body class="background_acount">

<header class="fooldal">
    <nav class="mobilMenu">

        <!--mobil menü-->
        <div id="myNav" class="overlay">
            <a  class="closebtn" onclick="closeNav()" style="cursor: pointer;">&times;</a>
            <div class="overlay-content">
                <a href="account_delete.html">Fiók törlése</a>
                <a id="logout" href="index.html">Kijelentkezés</a>
            </div>
        </div>

        <div>  <!--menu sor -->

            <div class="ulMobil">

                <a alt="Vissza a főoldalra gomb" style="font-size:70px;cursor: pointer;color:white" href="index.html">&#8962;</a>
                <a id="menulogo" style="font-size:30px;cursor:pointer;color:white;" href="index.html"></a>
                <a alt="Menü gomb" class="menu_bottom"  onclick="openNav()">&#9776;</a>
            </div>
        </div>
    </nav>
    <!-- asztali menü -->
    <nav class="desktopMenu">

        <div id="myNav_desk" class="overlay">
            <a  class="closebtn" onclick="closeNav_desk()" style="cursor: pointer;">&times;</a>
            <div class="overlay-content">

                <a th:href="@{/delete}">Fiók törlése</a>

                <a id="logout" th:href="@{/logout}">Kijelentkezés</a>
            </div>
        </div>

        <ul class="deskMenuList">
            <li>
                <a href="create_developer.html"> <img class="logo" src="src/logo.svg" alt="A honlap logója ami egy link a főoldalra."width="1000" height="1000" > </a>
            </li>
            <li>
              <a  href="create_developer.html">  <p id="pageName" >My little developer</p> </a>
            </li>
            <li>
            </li>
            <li>
                <a alt="Menü gomb" class="menu_bottom"  onclick="openNav_desk()">&#9776;</a>
            </li>
        </ul>
    </nav>

</header>
<main  id="up" class="bejelentkezettMain">
    <div class="sex" >
        <h2 >Válaszd ki milyen karakterrel szeretnél kezdeni!</h2> <br>
        <form>
            <a> <input type="text" id="characterName" class="car_name_input" name="car_name" placeholder="Karakter neve" > </a>

            <a> <input type="button" class="car_choise" id="no" name="sex" value="Nő" onclick="caracterno()"> </a>

            <a> <input type="button" class="car_choise" id="ferfi" name="sex" value="Férfi" onclick="caracterferfi()" ><br> </a>
        </form>

        <!--------ferfi tab--------------------------------------->
        <div class="ferfi_tab" id="ferfi_tab">
            <div class="choise_containter">
                <!-------férfi-statikusak a képek, nem kell adatbázisból megjelenitése----------->
                <div  class="card_inv" id="f1" >

                    <img class="skin_img" src="../static/image/skin/6f.png"  alt="Skin előnézete">

                    <form>
                        <input type="button" value="Kiválaszt" onclick="saveCharacter(true, '6f'), wichcar('f1')" class="shop_buy"  >
                    </form>
                </div>

                <div  class="card_inv" id="f2" >

                    <img class="skin_img" src="../static/image/skin/1f.png"  alt="Skin előnézete">

                    <form>
                        <input type="button" value="Kiválaszt"  onclick="saveCharacter(true, '1f'), wichcar('f2')" class="shop_buy"  >
                    </form>
                </div>

            </div>
        </div>
        <!-----------------noi tab--------------------------------------------->
        <div class="noi_tab" id="noi_tab">
            <div class="choise_containter">
                <!-------női-statikusak a képek, nem kell adatbázisból megjelenitése----------->

                <div i class="card_inv" id="l1" >

                    <img class="skin_img" src="../static/image/skin/lányskin/1l.png"  onclick="saveCharacter(false, '1l'), wichcar('l1')" alt="Skin előnézete">

                    <form>
                        <input type="button" value="Kiválaszt" onclick="postCharacter(), wichcar('l1')" class="shop_buy" >
                    </form>
                </div>

                <div  class="card_inv" id="l2" >

                    <img class="skin_img" src="../static/image/skin/lányskin/1l.png" onclick="saveCharacter(false, '2l')" alt="Skin előnézete">

                    <form>
                        <input type="button" value="Kiválaszt" onclick="postCharacter(), wichcar('l2')" class="shop_buy"  >
                    </form>
                </div>

            </div>

        </div>

        <input onclick="postCharacter()"  id="kivalszt" type="submit" value="Létrehoz" readonly  >

        <a href="#up" class="up">
            <div class="up_button">
                &#8593;
            </div>
        </a>
    </div>
</main>

<script>
    var isMale
    var skinName

    function saveCharacter(isMalein, skinNamein){
        isMale = isMalein
        skinName = skinNamein
    }

    function postCharacter(){
        if(isMale != null && skinName != null){
            console.log("Kéne postolni")
            developerName = $("#characterName").val()
            developerSex = isMale
            developerSkin = skinName

            if(developerSex){
                developerSkin = "skin/" + developerSkin + ".png"
            }else{
                developerSkin = "skin/lanyskin/" + developerSkin + ".png"
            }


            parameters = {devname: developerName, devsex: developerSex, devskin: developerSkin}

            var csrfHeader = "[[${_csrf.headerName}]]";
            var csrfToken = "[[${_csrf.token}]]";

            console.log(JSON.stringify(parameters))
            $.ajax({
               type: "POST",
               url: "[[@{'/process_create_dev?'}]]" + $.param(parameters),
                beforeSend: function(xhr){
                   xhr.setRequestHeader(csrfHeader, csrfToken)
                },
                dataType: 'json',
                contentType: 'application/json'
            }).done(function(){
                window.location.href = "[[@{'/game'}]]";
            });
        }
    }

</script>

<!-- media query a responsivitáshoz -->

<style>

    @media only screen and (max-width: 600px) {
        .desktopMenu {
            display:none;

        }
    }
    @media only screen and (min-width: 600px) {
        .mobilMenu {
            display:none;
        }
    }
    @media only screen and (max-width: 1000px) {
        #pageName{
            margin:0;
            display:none;
        }
        .deskMenuList{
            grid-template-columns: 33% 20% 23% 23%;
        }
    }
</style>
</body>
<footer>
    &#169; 2021 mylildev.hu
</footer>
</html>